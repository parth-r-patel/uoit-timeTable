<link rel="import" href="bower_components/paper-button/paper-button.html">

<dom-module id="p3-button-group">
	<style>
		.button-group {
			margin-left: 5px;
		}
		paper-button:first-of-type {
			border-radius: 3px 0 0 3px;
		}
		paper-button:last-of-type {
			border-radius: 0 3px 3px 0;
		}
		paper-button:last-of-type::after {
			display: none;
		}
		paper-button::shadow {
			margin-right: -3px;
			margin-left: 0;
			border-radius: 0;
			background-color: royalblue;
			color: white;
			text-transform: none;
			font-family: sans-serif;
			border: 2px solid royalblue;
		}
		paper-button::shadow .keyboard-focus {
			font-weight: normal;
		}
		paper-button[active] {
			color: royalblue;
			background-color: white;
			box-shadow: none;
		}
	</style>
	<template>
		<div class="button-group" id="buttonGroup">
			<template is="dom-repeat" items="{{buttons}}" as="button">
				<paper-button id="{{computeId(index)}}" on-click="select">{{button.label}}</paper-button>
			</template>
		</div>
	</template>
	<script>
		(function() {
			Polymer({
				is: "p3-button-group",
				properties: {
					buttons: {
						type: Object
					},
					lastSelected: {
						type: Number,
						value: -1
					},
					value: {
						type: Object,
						notify: true
					}
				},
				computeId: function(index) {
					return "btn" + index;
				},
				select: function(evt) {
					var newButton = evt.srcElement.parentElement;
					var newButtonIndex = evt.model.index;

					if(this.lastSelected >= 0) {
						this.$$("#buttonGroup").children[this.lastSelected].removeAttribute("active");
						newButton.setAttribute("active", true);
						this.lastSelected = newButtonIndex;
					}
					else {
						newButton.setAttribute("active", true);
						this.lastSelected = newButtonIndex;
					}
					this.value = {index: newButtonIndex, label: evt.srcElement.innerHTML.trim()};
				},
				ready: function() {
				}
			})
		})();
	</script>
</dom-module>
